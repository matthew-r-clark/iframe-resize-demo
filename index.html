<!DOCTYPE html>
<html lang="en">
<head>
  <title>Iframe Resize Demo</title>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="https://meyerweb.com/eric/tools/css/reset/reset.css" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Google+Sans&display=swap" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap">
  <script src="https://matthew-r-clark.github.io/pane-management/babel/paneManager.min.js"></script>
</head>
<body>
  <div class="container">
    <header>
      <h1>Iframe Resize Demo</h1>
      <h3>An implementation of <a href="https://github.com/matthew-r-clark/pane-management" target="blank">Pane Management</a>, a pair of browser scripts that work together to dynamically resize <code>&lt;iframe&gt;</code> heights based on their content.</h3>
    </header>

    <section class="dark">
      <h2>Challenges "Fake Store" Presents:</h2>
      <ul>
        <li>Origin differs from main site, preventing JavaScript from the main window from accessing the window object contained in the <code>&lt;iframe&gt;</code>.</li>
        <li>Site is hosted for free on Heroku so initial load delayed by several seconds.</li>
        <li>All data is loaded through a fetch request, then html is generated dynamically through a script.</li>
        <li>When selecting a product at the bottom of the list of all products, the <code>&lt;iframe&gt;</code> height would change but the viewport location does not, by default, stay focused on the <code>&lt;iframe&gt;</code>.</li>
      </ul>
      <iframe src="https://mclark-fake-store.herokuapp.com"
        frameborder="0"
        scrolling="no">
      </iframe>
    </section>

    <section>
      <h2>Challenges "A Few Simple HTML Pages" Presents:</h2>
      <ul>
        <li>Origin differs from main site, preventing JavaScript from the main window from accessing the window object contained in the <code>&lt;iframe&gt;</code>.</li>
        <li><code>&lt;img&gt;</code> tags are generated dynamically for each <code>&lt;li&gt;</code> tag, and assigned a random image URL. <code>&lt;li&gt;</code> tags don't have a size so the element has a height value of 0 until the image is loaded.</li>
        <li>Navigation results in changing pages, thus changing the currently running script.</li>
      </ul>
      <iframe src="https://iframe-resizer-pages-demo.netlify.app/"
        frameborder="0"
        scrolling="no">
      </iframe>
    </section>
    
    <section class="dark">
      <h2>Challenges "Help Matt Get Home!" Presents:</h2>
      <ul>
        <li>Footer and main content are spread apart using the flexbox "space-between" style so the footer is always at the bottom of the page regardless of window size. Because of this when you increase the size of the board, then decrease it, you can't simply find the size of the body element to resize the <code>&lt;iframe&gt;</code> correctly. The <code>&lt;iframe&gt;</code> resizer always finds the most compact height possible to display all of the content.</li>
      </ul>
      <iframe src="https://matthew-r-clark.github.io/dijkstra_implementation"
        frameborder="0"
        scrolling="no">
      </iframe>
    </section>

    <footer>
      <h2>Other notes:</h2>
      <ul>
        <li>Each <code>&lt;iframe&gt;</code> is registered upon page load, and any dynamically created/removed <code>&lt;iframe&gt;</code> is registered/unregistered upon relevant change to the DOM. An <code>&lt;iframe&gt;</code> will be excluded from registration if a height value is hard coded into the HTML, but you can also force registration by adding an additional attribute: height-dynamic="true"</li>
        <li>Resizing the page will adjust the height of <code>&lt;iframes&gt;</code> to allow their content to fit.</li>
        <li>Any click or change to the DOM within an <code>&lt;iframe&gt;</code> will trigger a check for a height change and update the frame if necessary. Along with this, the page will scroll so that the top of the <code>&lt;iframe&gt;</code> is at the top of the main window (ex. if you select a product at the end of a long product list and there is additional content below that <code>&lt;iframe&gt;</code>, you don't want to have to scroll back up to see the now shorter <code>&lt;iframe&gt;</code> content.</li>
      </ul>
    </footer>
  </div>
</body>
</html>